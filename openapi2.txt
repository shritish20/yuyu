{"openapi":"3.1.0","info":{"title":"VoluGuard API","description":"Comprehensive API for Volatility Analysis, Strategy Suggestion, Risk Management, and Trade Logging.","version":"0.1.0"},"paths":{"/":{"get":{"summary":"Root","description":"Root endpoint for API health check.","operationId":"root__head","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"head":{"summary":"Root","description":"Root endpoint for API health check.","operationId":"root__head","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/precheck/order":{"post":{"summary":"Precheck Order","description":"Prechecks a single order for sufficient margin.","operationId":"precheck_order_precheck_order_post","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpstoxOrderRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/place/order":{"post":{"summary":"Place Single Order","description":"Places a single order to the exchange via Upstox API.","operationId":"place_single_order_place_order_post","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpstoxOrderRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/place/multileg":{"post":{"summary":"Place Multileg","description":"Places multiple orders as a single multi-leg order to the exchange via Upstox API.","operationId":"place_multileg_place_multileg_post","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultiLegOrder"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/place/gtt":{"post":{"summary":"Place Gtt","description":"Places a single GTT order to the exchange via Upstox API.","operationId":"place_gtt_place_gtt_post","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GTTOrderRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/place/gtt-multileg":{"post":{"summary":"Place Gtt Multileg","description":"Places multiple GTT orders to the exchange via Upstox API.","operationId":"place_gtt_multileg_place_gtt_multileg_post","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultiLegGTTRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/live/dashboard":{"get":{"summary":"Live Dashboard","description":"Fetches portfolio, greeks, and trade-wise P&L summary (Upstox compliant).","operationId":"live_dashboard_live_dashboard_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/order/book":{"get":{"summary":"Order Book","description":"Retrieves the complete order book from Upstox.","operationId":"order_book_order_book_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/trades/day":{"get":{"summary":"Trade Log","description":"Retrieves the trades for the current day from Upstox.","operationId":"trade_log_trades_day_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/expiries":{"get":{"summary":"Get Expiry Dates Endpoint","description":"Returns calculated weekly and monthly expiry dates for Nifty 50.","operationId":"get_expiry_dates_endpoint_expiries_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/predict/volatility":{"get":{"summary":"Predict Volatility Endpoint","description":"Predicts various volatility metrics including Historical, GARCH, and XGBoost-predicted volatility.\nRequires Upstox access token for fetching option chain data.","operationId":"predict_volatility_endpoint_predict_volatility_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/log/trade":{"post":{"summary":"Log New Trade Endpoint","description":"Logs a new trade entry to Supabase.","operationId":"log_new_trade_endpoint_log_trade_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TradeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/log/journal":{"post":{"summary":"Log New Journal Endpoint","description":"Adds a new journal entry to Supabase.","operationId":"log_new_journal_endpoint_log_journal_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JournalRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/fetch/trades":{"get":{"summary":"Fetch Trades Endpoint","description":"Fetches all logged trade entries from Supabase, with optional status filter.","operationId":"fetch_trades_endpoint_fetch_trades_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter trades by status (e.g., 'open', 'closed')","title":"Status"},"description":"Filter trades by status (e.g., 'open', 'closed')"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/fetch/journals":{"get":{"summary":"Fetch Journals Endpoint","description":"Fetches all logged journal entries from Supabase.","operationId":"fetch_journals_endpoint_fetch_journals_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/fetch/option-chain":{"get":{"summary":"Fetch Option Chain Api","description":"Fetches the current option chain for the configured instrument and expiry.","operationId":"fetch_option_chain_api_fetch_option_chain_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/execute/order":{"post":{"summary":"Execute Order Endpoint","description":"Places multiple orders to the exchange via Upstox API using the multi-leg order endpoint.","operationId":"execute_order_endpoint_execute_order_post","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UpstoxOrderRequest"},"title":"Orders"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/suggest/strategy":{"get":{"summary":"Suggest Strategy Endpoint","description":"Suggests optimal trading strategies based on current market conditions and volatility regime.","operationId":"suggest_strategy_endpoint_suggest_strategy_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/strategy/details":{"post":{"summary":"Get Strategy Details Endpoint","description":"Retrieves detailed information (legs, premiums, max PnL) for a specific option strategy.","operationId":"get_strategy_details_endpoint_strategy_details_post","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StrategyRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/evaluate/risk":{"post":{"summary":"Evaluate Risk Endpoint","description":"Evaluates the risk profile of the entire trading portfolio based on provided active trades.\nIn a live system, `active_trades` would typically be fetched from Upstox Positions API.","operationId":"evaluate_risk_endpoint_evaluate_risk_post","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RiskEvaluationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/full-chain-table":{"get":{"summary":"Full Chain Table Endpoint","description":"Returns a detailed table of option chain data for strikes near the current spot price.\nIncludes IVs, IV skew, Greeks, Straddle Price, and Total Open Interest.","operationId":"full_chain_table_endpoint_full_chain_table_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/calculate/regime":{"get":{"summary":"Calculate Regime Endpoint","description":"Calculates and returns the current market volatility regime (e.g., High Vol Trend, Low Volatility).","operationId":"calculate_regime_endpoint_calculate_regime_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/calculate/iv-skew-slope":{"get":{"summary":"Calculate Iv Skew Slope Endpoint","description":"Calculates the slope of the Implied Volatility (IV) skew.","operationId":"calculate_iv_skew_slope_endpoint_calculate_iv_skew_slope_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/calculate/chain-metrics":{"get":{"summary":"Chain Metrics Endpoint","description":"Calculates and returns seller-specific metrics (e.g., straddle price, average IV)\nand broader market metrics (e.g., PCR, Max Pain) from the option chain.","operationId":"chain_metrics_endpoint_calculate_chain_metrics_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/calculate/volatility":{"get":{"summary":"Calc Volatility Endpoint","description":"Calculates and returns 7-day Historical Volatility (HV), GARCH-predicted 7-day Volatility,\nand the Implied Volatility-Realized Volatility (IV-RV) spread.","operationId":"calc_volatility_endpoint_calculate_volatility_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/load/model":{"get":{"summary":"Load Xgboost Model Endpoint","description":"Attempts to load the XGBoost volatility prediction model.\nReturns status indicating if the model was loaded successfully.","operationId":"load_xgboost_model_endpoint_load_model_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/predict/xgboost-vol":{"get":{"summary":"Predict Xgboost Vol Endpoint","description":"Predicts future volatility using the pre-trained XGBoost model based on current market data.","operationId":"predict_xgboost_vol_endpoint_predict_xgboost_vol_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/test/all":{"get":{"summary":"Test All Endpoints","description":"Runs a series of tests against core calculation endpoints to verify functionality.","operationId":"test_all_endpoints_test_all_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/authorize-market-feed":{"get":{"summary":"Authorize Market Feed Endpoint","description":"Returns an authorized WebSocket URL for Upstox market data feed. This is useful if a client wants to connect directly to Upstox's WS after getting the authorized URI from your backend.","operationId":"authorize_market_feed_endpoint_authorize_market_feed_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/authorize-portfolio-feed":{"get":{"summary":"Authorize Portfolio Feed Endpoint","description":"Returns an authorized WebSocket URL for Upstox portfolio feed (order, position, holding).\nThis is useful if a client wants to connect directly to Upstox's WS after getting the authorized URI from your backend.","operationId":"authorize_portfolio_feed_endpoint_authorize_portfolio_feed_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox API Access Token","title":"Access Token"},"description":"Upstox API Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/option-seller-dashboard":{"get":{"summary":"Option Seller Dashboard","description":"Provides a comprehensive dashboard of option seller metrics including spot price, India VIX, ATM metrics,\nmarket metrics, and volatility data.","operationId":"option_seller_dashboard_option_seller_dashboard_get","parameters":[{"name":"access_token","in":"query","required":true,"schema":{"type":"string","description":"Upstox Access Token","title":"Access Token"},"description":"Upstox Access Token"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"GTTOrderRequest":{"properties":{"transaction_type":{"type":"string","title":"Transaction Type"},"instrument_key":{"type":"string","title":"Instrument Key"},"product":{"type":"string","title":"Product"},"price":{"type":"number","title":"Price"},"trigger_price":{"type":"number","title":"Trigger Price"},"quantity":{"type":"integer","title":"Quantity"},"time_in_force":{"type":"string","title":"Time In Force","default":"GTT"},"trigger_type":{"type":"string","title":"Trigger Type","default":"single"},"order_type":{"type":"string","title":"Order Type","default":"limit"}},"type":"object","required":["transaction_type","instrument_key","product","price","trigger_price","quantity"],"title":"GTTOrderRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"JournalRequest":{"properties":{"title":{"type":"string","title":"Title"},"content":{"type":"string","title":"Content"},"mood":{"type":"string","title":"Mood"},"tags":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tags","default":""}},"type":"object","required":["title","content","mood"],"title":"JournalRequest"},"MultiLegGTTRequest":{"properties":{"legs":{"items":{"$ref":"#/components/schemas/GTTOrderRequest"},"type":"array","title":"Legs"}},"type":"object","required":["legs"],"title":"MultiLegGTTRequest"},"MultiLegOrder":{"properties":{"legs":{"items":{"$ref":"#/components/schemas/UpstoxOrderRequest"},"type":"array","title":"Legs"}},"type":"object","required":["legs"],"title":"MultiLegOrder"},"RiskEvaluationRequest":{"properties":{"active_trades":{"items":{"$ref":"#/components/schemas/TradeRequest"},"type":"array","title":"Active Trades"}},"type":"object","required":["active_trades"],"title":"RiskEvaluationRequest"},"StrategyRequest":{"properties":{"strategy":{"type":"string","title":"Strategy"},"lots":{"type":"integer","minimum":1.0,"title":"Lots","default":1}},"type":"object","required":["strategy"],"title":"StrategyRequest"},"TradeRequest":{"properties":{"strategy":{"type":"string","title":"Strategy"},"instrument_token":{"type":"string","title":"Instrument Token"},"entry_price":{"type":"number","title":"Entry Price"},"quantity":{"type":"number","title":"Quantity"},"realized_pnl":{"type":"number","title":"Realized Pnl"},"unrealized_pnl":{"type":"number","title":"Unrealized Pnl"},"regime_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Regime Score"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","default":""},"capital_used":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Capital Used"},"potential_loss":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Potential Loss"},"sl_hit":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Sl Hit","default":false},"vega":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Vega"},"timestamp_entry":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timestamp Entry"},"timestamp_exit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timestamp Exit"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","default":"closed"}},"type":"object","required":["strategy","instrument_token","entry_price","quantity","realized_pnl","unrealized_pnl"],"title":"TradeRequest"},"UpstoxOrderRequest":{"properties":{"transaction_type":{"type":"string","title":"Transaction Type"},"instrument_key":{"type":"string","title":"Instrument Key"},"product":{"type":"string","title":"Product"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price","default":0.0},"quantity":{"type":"integer","title":"Quantity"}},"type":"object","required":["transaction_type","instrument_key","product","quantity"],"title":"UpstoxOrderRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}
